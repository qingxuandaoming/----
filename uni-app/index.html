<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>辨体施膳</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  </head>
  <body>
    <div id="app"></div>
    <script>
      window.uni = window.uni || {}
      if (!('getSystemInfoSync' in uni)) {
        uni.getSystemInfoSync = function(){ return { system: 'H5' } }
      }
      if (typeof uni.getLocale !== 'function') {
        uni.getLocale = function(){ return 'zh-CN' }
      }
      if (typeof uni.onLocaleChange !== 'function') {
        uni.onLocaleChange = function(){ /* noop */ }
      }
      if (typeof uni.requireNativePlugin !== 'function') {
        uni.requireNativePlugin = function(){
          return new Proxy({}, { get(){ return function(){ return null } } })
        }
      }
      if (typeof uni.switchTab !== 'function') {
        uni.switchTab = function(opts){ if (opts && opts.url) location.hash = opts.url }
      }
      if (typeof uni.navigateTo !== 'function') {
        uni.navigateTo = function(opts){ if (opts && opts.url) location.hash = opts.url }
      }
      if (typeof uni.showToast !== 'function') {
        uni.showToast = function(opts){ if (opts && opts.title) alert(opts.title) }
      }
      if (typeof uni.showActionSheet !== 'function') {
        uni.showActionSheet = function(opts){
          var list = (opts && opts.itemList) || []
          var choice = prompt('选择: ' + list.join(' / '), list[0] || '')
          var index = Math.max(0, list.indexOf(choice))
          if (opts && typeof opts.success === 'function') opts.success({ tapIndex: index })
        }
      }
      if (typeof uni.makePhoneCall !== 'function') {
        uni.makePhoneCall = function(opts){ if (opts && opts.phoneNumber) location.href = 'tel:' + opts.phoneNumber }
      }
      if (typeof uni.chooseImage !== 'function') {
        uni.chooseImage = function(opts){
          var input = document.createElement('input'); input.type = 'file'; input.name = 'imageUpload'; input.accept = 'image/*'; input.onchange = function(){
            var file = input.files && input.files[0]; var url = file ? URL.createObjectURL(file) : ''
            if (opts && typeof opts.success === 'function') opts.success({ tempFilePaths: [url] })
          }; input.click()
        }
      }
      if (typeof uni.loadFontFace !== 'function') {
        uni.loadFontFace = function(opts){
          try {
            var family = (opts && opts.family) || 'uicon-font'
            var source = (opts && opts.source) || ''
            var styleId = 'uni-fontface-style-' + family
            var styleEl = document.getElementById(styleId)
            if (!styleEl) { styleEl = document.createElement('style'); styleEl.id = styleId; document.head.appendChild(styleEl) }
            styleEl.textContent = '@font-face{font-family:"' + family + '";src:' + source + ';font-display:swap;}'
            if (opts && typeof opts.success === 'function') opts.success({})
          } catch (e) {
            if (opts && typeof opts.fail === 'function') opts.fail(e)
          } finally {
            if (opts && typeof opts.complete === 'function') opts.complete()
          }
        }
      }
    </script>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>